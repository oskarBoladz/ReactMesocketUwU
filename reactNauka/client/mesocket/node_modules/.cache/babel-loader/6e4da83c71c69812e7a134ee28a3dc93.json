{"ast":null,"code":"import _toConsumableArray from\"/home/ossas/Desktop/gitShit/ReactMesocketUwU/reactNauka/client/mesocket/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/ossas/Desktop/gitShit/ReactMesocketUwU/reactNauka/client/mesocket/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{createRoot}from\"react-dom/client\";import{useEffect,useState}from'react';import'./index.css';import io from'socket.io-client';//import logo from \"./likeButton.jpg\"\n//import {MainContent} from \"./MainContent.js\"\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket=io.connect('http://localhost:3001');var container=document.getElementById('root');var root=createRoot(container);var userData={nick:null,room:null};var alUsers=[];var pmes=\"\";while(true){var nick=prompt(\"nick: \");if(nick.length<=13){userData.nick=nick;break;}}while(true){var room=prompt(\"room: \");if(room.length==4&&!isNaN(room)){userData.room=room;break;}}socket.emit('userIn',userData.nick);function AllPage(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),messageAll=_React$useState2[0],setThingsArray=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),usersAllbox=_React$useState4[0],setUsers=_React$useState4[1];function BtnSend(){if(document.getElementById('mesage').value!=\"\"){socket.emit('message',{message:document.getElementById('mesage').value,nick:userData.nick,dateS:userData.nick+new Date()});document.getElementById('mesage').value=\"\";}}function addMessage(nickk,textt,clases){console.log(\"karaczan\");setThingsArray(function(prevState){return[].concat(_toConsumableArray(prevState),[{nick:nickk,text:textt,clases:clases,key:nickk+\" \"+new Date()}]);});//https://www.youtube.com/watch?v=bMknfKXIFA8&t=2961s // 6:09:46\n}socket.on('message',function(data){//once\nif(!(pmes==data.dateS)){var clas=\"hisMessage\";if(data.nick==userData.nick){clas=\"myMessage\";}console.log(data);addMessage(data.nick,data.message,clas);}pmes=data.dateS;});/*\nif(data.nick!=userData.nick){\n  NewMessage(data.nick,data.message,\"hisMessage\")\n}else\n{NewMessage(data.nick,data.message,\"myMessage\")}\n  \n})\n\nfunction NewMessage(user,text,className){\n    var newMessage=document.createElement('div')\n    newMessage.className=className\n    newMessage.innerHTML=\"<i>\"+user+\"</i><br>\"+text\n    document.getElementById(\"ChatWindow\").appendChild(newMessage)\n    //npm start    || node .\n    console.log(user,text)\n\nconst msg=(\n      <div className={className}>\n        <i>{user}</i><br/>\n        {text}\n      </div>\n    )\n  else{\n    var newMessage=document.createElement('div')\n    newMessage.className=\"hisMessage\"\n    newMessage.innerHTML=user+\"<br>\"+text\n    document.getElementById(\"ChatWindow\").appendChild(newMessage)\n    console.log(user,text)\n  }*/ //<div class=\"hisMessage\"><i>{thing.nick}</i><br/>{thing.text}</div>\nvar AllMessageSetSet=messageAll.map(function(thing){return/*#__PURE__*/_jsxs(\"div\",{className:thing.clases,children:[/*#__PURE__*/_jsx(\"i\",{children:thing.nick}),/*#__PURE__*/_jsx(\"br\",{}),thing.text]},thing.key);});// tam do gury mimo że jest nowa data to i tak sie pierdoli to problem z on zmieniłam na once ale dalej w rekcie sie pierdoli\nfunction AllMessageSet(){return/*#__PURE__*/_jsx(\"div\",{children:AllMessageSetSet});}// function UserBoxWindow(){\n//   return(\n//   //<div class=\"UserBoxWindow\" key={nick}><h1>{nick}</h1></div>\n//   <div class=\"UserBoxWindow\">1234567890123</div>\n//   )\n// }\nfunction NickBar(){return/*#__PURE__*/_jsx(\"div\",{id:\"NickBar\",children:/*#__PURE__*/_jsx(UserBoxWindow,{})},\"NickBark\");}function ChatWindow(){return/*#__PURE__*/_jsx(\"div\",{id:\"ChatWindow\",children:/*#__PURE__*/_jsx(AllMessageSet,{})});}function UserInput(){return/*#__PURE__*/_jsxs(\"div\",{id:\"UserInput\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"mesage\",placeholder:\"message\"}),/*#__PURE__*/_jsx(\"button\",{id:\"send\",onClick:BtnSend,children:\"Send\"})]});}function Footer(){return/*#__PURE__*/_jsx(\"div\",{id:\"Footer\",children:\"Just footer with no data in it \\xAF\\\\_(\\u30C4)_/\\xAF\"});}// const UseOnPageLeave = (handler) => {\n//   useEffect(() => {\n//     window.onbeforeunload = () => handler();\n//     window.addEventListener('beforeunload', (event) => {\n//       handler();\n//     });\n//     return () => {\n//       handler();\n//       document.removeEventListener('beforeunload', handler);\n//     };\n//   });\n// };\nvar AllUsersSet=usersAllbox.map(function(thing){return/*#__PURE__*/_jsx(\"div\",{className:\"UserBoxWindowT\",children:thing},thing);});function UserBoxWindow(){return/*#__PURE__*/_jsx(\"div\",{children:AllUsersSet},\"AllUsersSetK\");}socket.once('updateUserList',function(data){alUsers=data;//tu daje pierdolenie o dodawaniu użytkownikuw z boku ale bez{...} mam nadzieje że bede wiedzdiał o co mi chodziło\nconsole.log(alUsers);setUsers(alUsers);//https://www.youtube.com/watch?v=bMknfKXIFA8&t=2961s // 6:09:46\n});socket.once('ptw',function(data){if(data==\"data\"){socket.emit('userIn',userData.nick);}});return/*#__PURE__*/_jsxs(\"div\",{id:\"allPage\",children:[/*#__PURE__*/_jsx(NickBar,{}),/*#__PURE__*/_jsx(ChatWindow,{}),/*#__PURE__*/_jsx(UserInput,{}),/*#__PURE__*/_jsx(Footer,{})]});}root.render(/*#__PURE__*/_jsx(AllPage,{}));//huj nie działa before the unload react żeby nick wykreślić\n//npm start // jak by to wyjebał i musiał kiedyś wrucić xd // start nie kurwa run run jest dla serweda","map":{"version":3,"names":["React","createRoot","useEffect","useState","io","socket","connect","container","document","getElementById","root","userData","nick","room","alUsers","pmes","prompt","length","isNaN","emit","AllPage","messageAll","setThingsArray","usersAllbox","setUsers","BtnSend","value","message","dateS","Date","addMessage","nickk","textt","clases","console","log","prevState","text","key","on","data","clas","AllMessageSetSet","map","thing","AllMessageSet","NickBar","ChatWindow","UserInput","Footer","AllUsersSet","UserBoxWindow","once","render"],"sources":["/home/ossas/Desktop/gitShit/ReactMesocketUwU/reactNauka/client/mesocket/src/index.js"],"sourcesContent":["import React from 'react';\nimport {createRoot} from \"react-dom/client\"\nimport {useEffect, useState} from 'react';\n\nimport './index.css'\n\nimport io from 'socket.io-client'\n\n//import logo from \"./likeButton.jpg\"\n//import {MainContent} from \"./MainContent.js\"\nconst socket = io.connect('http://localhost:3001');\n\nconst container = document.getElementById('root')\nconst root= createRoot(container)\n\nlet userData={\n  nick:null,\n  room:null\n}\n\nlet alUsers=[]\n\nlet pmes=\"\"\n\nwhile(true){\n  let nick=prompt(\"nick: \")\n  if(nick.length<=13){\n    userData.nick=nick;\n    break;\n  }\n}\n\nwhile(true){\n  let room=prompt(\"room: \")\n  if(room.length==4 && !isNaN(room)){\n    userData.room=room;\n    break;\n  }\n}\n\n\nsocket.emit('userIn',userData.nick)\n\nfunction AllPage(){\n\nconst [messageAll, setThingsArray] = React.useState([])\n\nconst [usersAllbox, setUsers]=React.useState([])\n\n\nfunction BtnSend(){\n\n  if(document.getElementById('mesage').value!=\"\"){\n    socket.emit('message',{message:document.getElementById('mesage').value,nick:userData.nick,dateS:userData.nick+(new Date())})\n    document.getElementById('mesage').value=\"\"\n  }\n}\n\nfunction addMessage(nickk,textt,clases){\n  console.log(\"karaczan\")\n  setThingsArray(prevState =>[...prevState,{nick:nickk,text:textt,clases:clases,key:nickk+\" \"+(new Date())}])//https://www.youtube.com/watch?v=bMknfKXIFA8&t=2961s // 6:09:46\n}\n\nsocket.on('message',(data)=>{//once\n  if(!(pmes==data.dateS)){\n  let clas=\"hisMessage\"\n  if(data.nick==userData.nick){\n    clas=\"myMessage\"\n  }\n  console.log(data)\n  addMessage(data.nick,data.message,clas)\n}\npmes=data.dateS\n})\n/*\nif(data.nick!=userData.nick){\n  NewMessage(data.nick,data.message,\"hisMessage\")\n}else\n{NewMessage(data.nick,data.message,\"myMessage\")}\n  \n})\n\nfunction NewMessage(user,text,className){\n    var newMessage=document.createElement('div')\n    newMessage.className=className\n    newMessage.innerHTML=\"<i>\"+user+\"</i><br>\"+text\n    document.getElementById(\"ChatWindow\").appendChild(newMessage)\n    //npm start    || node .\n    console.log(user,text)\n\nconst msg=(\n      <div className={className}>\n        <i>{user}</i><br/>\n        {text}\n      </div>\n    )\n  else{\n    var newMessage=document.createElement('div')\n    newMessage.className=\"hisMessage\"\n    newMessage.innerHTML=user+\"<br>\"+text\n    document.getElementById(\"ChatWindow\").appendChild(newMessage)\n    console.log(user,text)\n  }*/\n    \n\n//<div class=\"hisMessage\"><i>{thing.nick}</i><br/>{thing.text}</div>\nconst AllMessageSetSet = messageAll.map(thing => (\n<div key={thing.key} className={thing.clases}>\n<i>{thing.nick}</i><br/>\n{thing.text}\n</div>\n)\n)\n// tam do gury mimo że jest nowa data to i tak sie pierdoli to problem z on zmieniłam na once ale dalej w rekcie sie pierdoli\nfunction AllMessageSet(){\n  return <div>{AllMessageSetSet}</div>\n}\n\n// function UserBoxWindow(){\n//   return(\n//   //<div class=\"UserBoxWindow\" key={nick}><h1>{nick}</h1></div>\n//   <div class=\"UserBoxWindow\">1234567890123</div>\n//   )\n// }\n\nfunction NickBar(){\n  return(\n    <div id=\"NickBar\" key=\"NickBark\">\n      <UserBoxWindow />\n    </div>\n  )\n}\nfunction ChatWindow(){\n  return(\n  <div id=\"ChatWindow\">\n    <AllMessageSet />\n  </div>\n  )\n}\nfunction UserInput(){\n  return(\n  <div id=\"UserInput\">\n    <input type=\"text\" id=\"mesage\" placeholder=\"message\"/><button id=\"send\" onClick={BtnSend}>Send</button>\n  </div>\n    )\n}\nfunction Footer(){\n  return(\n  <div id=\"Footer\">\n  Just footer with no data in it ¯\\_(ツ)_/¯\n  </div>\n    )\n}\n\n\n\n// const UseOnPageLeave = (handler) => {\n//   useEffect(() => {\n//     window.onbeforeunload = () => handler();\n\n//     window.addEventListener('beforeunload', (event) => {\n//       handler();\n//     });\n\n//     return () => {\n//       handler();\n//       document.removeEventListener('beforeunload', handler);\n//     };\n//   });\n// };\nconst AllUsersSet = usersAllbox.map(thing => (\n  <div className=\"UserBoxWindowT\" key={thing}>{thing}</div>\n  )\n  )\n\nfunction UserBoxWindow(){\n  return <div key=\"AllUsersSetK\">{AllUsersSet}</div>\n}\n\nsocket.once('updateUserList',data=>{\n  alUsers=data//tu daje pierdolenie o dodawaniu użytkownikuw z boku ale bez{...} mam nadzieje że bede wiedzdiał o co mi chodziło\n  console.log(alUsers)\n  setUsers(alUsers)//https://www.youtube.com/watch?v=bMknfKXIFA8&t=2961s // 6:09:46\n})\n\nsocket.once('ptw',(data)=>{\n  if(data==\"data\"){\n    \n    socket.emit('userIn',userData.nick)\n  }\n})\n\n  return(\n  <div id=\"allPage\">\n    <NickBar />\n    <ChatWindow />\n    <UserInput />\n    <Footer />\n  </div>)\n}\n\n\n\nroot.render(<AllPage />)\n\n\n//huj nie działa before the unload react żeby nick wykreślić\n\n\n//npm start // jak by to wyjebał i musiał kiedyś wrucić xd // start nie kurwa run run jest dla serweda "],"mappings":"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"},"metadata":{},"sourceType":"module"}